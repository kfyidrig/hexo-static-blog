---
title: 'Orinoco: V8的垃圾回收器'
date: 2022-02-08 18:10:57
tags: [前端知识]
---

### 为什么需要垃圾回收

JavaScript作为一门高级编程语言，为了让开发者有更多的精力去专注于业务层面的复杂逻辑，并不像C语言或C++语言中需要手动地申请分配和释放内存，需要JS引擎自动进行内存的分配和管理。

### 垃圾回收器需要做什么

不论什么垃圾回收器都有一些定期需要去做的任务：

- 标记活动对象（live objects）和非活动对象(dead objects)
- 回收或者重用被非活动对象占据的内存
- 合并或者整理内存（可选的）

这些任务可以按照顺序或者交叉地执行。一种方式是暂停 JavaScript 的执行，在主线程上按照顺序去执行这些任务。这样做导致的结果就是 JavaScript 延迟执行，以及页面渲染时 JavaScript 来不及执行导致的页面空白或者卡顿问题。 这样做同时也会降低JavaScript执行的吞吐量（throughput）。

### V8的垃圾回收策略

V8的垃圾回收策略主要是基于分代式垃圾回收机制，其根据**对象的存活时间**将内存的垃圾回收进行不同的分代，然后对不同的分代采用不同的垃圾回收算法。

